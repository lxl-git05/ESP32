# 配置说明书

[toc]

## 1. 引脚配置

| Label          | `GPIOx`     | `Dx` | 备注    |
| -------------- | ----------- | ---- | ------- |
| I2C_SCL        | GPIO_NUM_1  | D0   | I2C总线 |
| I2C_SDA        | GPIO_NUM_2  | D1   | I2C总线 |
| LED_GPIO_NUM   | GPIO_NUM_3  | D2   | LED灯   |
| Key_0_GPIO_PIN | GPIO_NUM_4  | D3   | 按键    |
| PWM_GPIO_PIN_0 | GPIO_NUM_5  | D4   | PWM0    |
| PWM_GPIO_PIN_1 | GPIO_NUM_6  | D5   | PWM1    |
|                | GPIO_NUM_43 | D6   |         |
|                | GPIO_NUM_44 | D7   |         |
|                | GPIO_NUM_7  | D8   |         |
|                | GPIO_NUM_8  | D9   |         |
|                | GPIO_NUM_9  | D10  |         |

## 2. 基础外设

* 简单，省略

### 2-1 `MyLED`

### 2-2 OLED

### 2-3 PWM

### 2-4 Key

## 3. MPU6050

### 3-1 `MPU6050.h`

* 重要参数：原生态未处理过的参数

```c
extern MPU6050_Raw_Data  MPU_Raw_Data ;		// 最初的角度
```

* 重要函数：一看就懂，不讲了

```c
// setup:
// 初始化MPU6050相关配置
void MPU6050_Init(void);

// while:
// 原始数据更新到MPU6050_Raw_Data
void MPU6050_Update_Data(void) ;
```



### 3-2 `MPU6050_Angle.h`

* 互补滤波，根据MPU6050.h的数据进行处理

* 重要参数

```c
// 引出参数
extern ImuOffset_Typedef  MPU_Offset;			// 误差纠正参数
extern ImuCali_Typedef	  MPU_Cali	 ;			// 纠正后的数据
extern ImuReal_Typedef 	  MPU_Real  ;			// 最终的确定角度,这个是最重要的
extern int isMPU_Still_Flag ;					// 判断是否静止,判断阈值尾宏定义,自己查
```

* 函数
  * 注意,在ESP32中,禁止在中断中进行浮点运算,具体该怎么处理等后续优化,这里建议放在while

```c
// setup
// 自动纠正误差(可配合按键使用)
void MPU6050_Data_Error_Check(int Sanple_Cnt) ;

// while
// 检测静止状态函数
void MPU_Still_Check(void);
// 静止检测后自动纠正零漂
void MPU6050_Data_Error_Check_Auto(void) ;

// 中断:注意,在ESP32中,禁止在中断中进行浮点运算,具体该怎么处理等后续优化,这里建议放在while
// 减去误差后的数据
void MPU6050_Raw_Error_Update(void) ;
// 数据深度处理
void MPU6050_Raw_Deal(int Deal_dt_ms) ;
```

## 4. 工具库

### 4-1 Timer_Counter

* 时间计算函数，自己看.h





















